<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skedule</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect fill='%23ea580c' width='32' height='32' rx='4'/><text x='16' y='22' font-size='18' font-family='sans-serif' fill='white' text-anchor='middle'>S</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="min-h-screen">
  <div id="app" class="max-w-7xl mx-auto px-6 py-4 w-full">
    <!-- Header -->
    <header class="flex justify-between items-center mb-3 pb-2 border-b border-white/10 relative">
      <div>
        <p class="text-sm text-gray-500 tracking-wide uppercase">Bridging your tasks in your schedule.</p>
        <h1 class="text-3xl font-semibold text-black">Skedule</h1>
      </div>
      <div id="auth-area" class="text-black relative"></div>
    </header>

    <!-- Login -->
    <div id="login-screen" class="text-center py-14 card">
      <p class="text-[15px] text-[var(--muted)] mb-4">Sign in with Google to use Skedule</p>
      <button id="btn-google" class="px-4 py-2.5 btn-accent pill text-sm font-medium">
        Sign in with Google
      </button>
    </div>

    <!-- Main (after login) -->
    <div id="main-screen" class="hidden space-y-5">

      <!-- Task form -->
      <section class="mb-2 p-5 card form-shell">
        <div class="panel-head">
          <div>
            <h2 class="text-xl font-semibold text-[var(--text)] mt-1">What should we schedule?</h2>
            <p class="text-[13px] text-[var(--muted)] mt-1">Give us a name and a bit of context; we’ll place it in your week.</p>
          </div>
        </div>
        <form id="task-form" class="space-y-4">
          <div class="grid gap-4 md:grid-cols-[1.1fr_0.9fr]">
            <div class="space-y-3">
              <div class="field">
                <label class="field-label">Task name</label>
                <input type="text" name="name" required placeholder="e.g. Finish AI lab report" class="field-input" />
              </div>
              <div class="field">
                <label class="field-label">Description</label>
                <input type="text" name="description" placeholder="Key points, chapter, or goal" class="field-input" />
              </div>
            </div>
            <div class="space-y-3">
              <div class="grid grid-cols-3 gap-3">
                <div class="field">
                  <label class="field-label">Difficulty</label>
                  <select name="difficulty" class="field-input">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                  </select>
                </div>
                <div class="field">
                  <label class="field-label">Focus</label>
                  <select name="focus_level" class="field-input">
                    <option value="short">Short (25m)</option>
                    <option value="medium" selected>Medium (50m)</option>
                    <option value="long">Long (90m)</option>
                  </select>
                </div>
                <div class="field">
                  <label class="field-label">Preference</label>
                  <select name="time_preference" class="field-input">
                    <option value="day">Day</option>
                    <option value="midday" selected>Midday</option>
                    <option value="night">Night</option>
                  </select>
                </div>
              </div>
              <div class="hint-row">
                <span class="dot dot-orange"></span>
                <p class="text-xs text-[var(--muted)]">We’ll suggest slots in the next 7 days based on your calendar.</p>
              </div>
            </div>
          </div>
          <div class="flex items-center gap-3 flex-wrap">
            <button type="submit" class="px-4 py-2 btn-accent pill text-sm font-semibold shadow-sm">Add task &amp; suggest</button>
            <p class="text-[13px] text-[var(--muted)]">Suggestions appear under “Your tasks”.</p>
          </div>
        </form>
      </section>

      <!-- Tasks + Calendar side-by-side -->
      <section class="mb-4 grid gap-3 md:grid-cols-[1.5fr_0.6fr] items-stretch">
        <!-- Calendar -->
        <div class="space-y-3 h-full">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-semibold text-black">Calendar</h2>
            <div class="flex flex-wrap items-center gap-2">
              <button id="calendar-prev" class="pill bg-white/70 px-3 py-1 text-xs text-black hover:bg-white">Prev</button>
              <button id="calendar-today" class="pill bg-[var(--accent)]/10 px-3 py-1 text-xs text-[var(--accent-strong)] hover:bg-[var(--accent)]/20">Today</button>
              <button id="calendar-next" class="pill bg-white/70 px-3 py-1 text-xs text-black hover:bg-white">Next</button>
              <span id="calendar-range" class="text-xs text-[var(--muted)]"></span>
            </div>
          </div>
          <div id="calendar-week" class="p-5 card min-h-[220px]">
            <div id="calendar-days-header" class="calendar-days-header"></div>
            <div id="calendar-grid" class="calendar-grid"></div>
            <p id="calendar-empty" class="text-slate-500 text-sm mt-3 hidden"></p>
            <div id="calendar-loading" class="loading-overlay hidden">
              <div class="spinner"></div>
            </div>
          </div>
        </div>

        <!-- Tasks + suggestions -->
        <div class="p-5 card space-y-4 h-full">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-semibold text-[var(--text)]">Your tasks</h2>
            <div class="flex items-center gap-2">
              <span id="suggest-limit" class="limit-pill hidden">Max 15 suggestions</span>
              <input id="suggest-count" type="text" value="5" class="w-14 text-xs px-2 py-1 bg-white border border-[var(--panel-border)] rounded" title="Number of suggestions" />
            </div>
          </div>
          <div id="suggestions-explain" class="explain-box hidden" aria-live="polite"></div>
          <div id="tasks-list" class="space-y-2"></div>
        </div>
      </section>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
